{"pageProps":{"entries":{"items":[{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"1LeL4UVOHUDMhADm8Kdrtt","type":"Entry","createdAt":"2020-09-05T02:37:30.465Z","updatedAt":"2020-09-05T04:47:28.383Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":6,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"スプレッドシートのデータをいい感じの年表にしてくれるサービス「THE TIMELINE」をリニューアルしました","slug":"the-timeline-v2","excerpt":"Googleスプレッドシートのデータを読み取っていい感じにきれいな年表にしてくれるという、超地味な年表作成サービス「THE TIMELINE（ザ・タイムライン）」を運営して早3年くらいになるのですが、このたび初めての大幅リニューアルを実施しました。","content":"Googleスプレッドシートのデータを読み取っていい感じにきれいな年表にしてくれるという、超地味な年表作成サービス「THE TIMELINE（ザ・タイムライン）」を運営して早3年くらいになるのですが、このたび初めての大幅リニューアルを実施しました。\n\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://the-timeline.jp\" data-iframely-url=\"//cdn.iframe.ly/y10WkNF?iframe=card-small\"></a></div></div><script async src=\"//cdn.iframe.ly/embed.js\" charset=\"utf-8\"></script>\n\nありがたいことに界隈では（どこ？）おそらく最も使われるサービスになっており、気づけば毎日年表が作られるようになってきました。\nまだ年表というものを作ったことないという人も多いかと思いますが、実はすごく楽しいのでだまされたと思ってぜひ遊んでみてもらえたらうれしいです。\n\n<hr>\n\n### そもそもどんなサービスだったかというと\nGoogleスプレッドシートのデータを読み取って、自動でいい感じの年表を表示してくれるサービスです。\n\nたとえばこんな感じのスプレッドシートが、\n\n<img src=\"https://storage.googleapis.com/blog-notsobad/images/20200903000003.png\" />\n\nこんな感じの年表になります。\n\n<img src=\"https://storage.googleapis.com/blog-notsobad/images/20200903000002.png\" />\n\nポイントとしては、\n\n- スプレッドシートを更新するだけで年表も自動更新される\n- スプレッドシートを共有すれば複数人で共同編集もできる\n- 万が一このサービスがつぶれても、スプレッドシートのデータはずっと残る\n\nという感じで、大事なところはほとんど全部スプレッドシートにお任せしているので安心です。\n\n<br>\n\n### リニューアルでよくなったところ\n今回はシステムのリプレイスがメインなので機能追加とかはそんなにないのですが、多少よくなったところもあります。\n\n###### 🚧 シートの読み込みエラーがだいぶ減りました\nエラー制御を改善したのとシート連携の手順も簡略化できたので、かなりエラーが減らせたんじゃないかと思います。\n\n旧バージョンでうまく表示されなかったという方も、ぜひ再度お試しいただければ幸いです。\n\n###### 🚀 表示速度が早くなりました \nStatic Generationですからね。わーい。\n\n###### 📱 スマホでもグループ見出しが見えるようになりました\n旧バージョンではグループの見出しが独立して幅を取っていたため、スマホだと見づらくなっておりました。新バージョンではこれが改善され、スマホでも多少見やすくなったかと思います。\n\nしかしやっぱり年表は大きい画面の方が見やすいし楽しいのでPC推奨です。\n\n###### 🗞 グループごとに折りたたみできるようになりました\n地味な改善なのですが、グループ見出しをクリックするとグループ単位で折りたたみできるようになりました。\nグループが多いときとかに便利かもしれません。\n\n<br>\n\n### 旧バージョンからの移行ガイド\n旧バージョンをお使いいただいていた方への移行ガイドです。\nといっても基本的には特に気にせずそのまま使用いただけるのですが、過去年表を今後も更新したい場合のみご注意ください。\n\n- アカウントやデータはそのまま移行されるので、今までどおりログインできます\n- 過去に作成した年表もそのまま表示されますが、今後のシート更新が自動反映されなくなります（詳細は次項）\n\n###### 🛠 旧バージョンで作成した年表の更新について\n旧バージョンで作成した年表は移行後も問題なく表示されます。\nただスプレッドシートの読み取りURLが変更になった関係で、今後シートを更新しても旧バージョンの年表には反映されなくなります。\n\n旧バージョンで作成した年表を今後も更新したい場合、お手数ですが新バージョンの年表作成画面から再度シートのURLをインポートしてください。\n\n<br>\n\n### システム的な話\n今回のリニューアルでは、愛用していたRiot.jsを離れてNext.jsを採用しました。\nv4へのアップデートはついていけなかったよ。。ごめんよRiot。。。\n\nというわけで新しいシステム構成はこんな感じです。\n\n<img src=\"https://storage.googleapis.com/blog-notsobad/images/20200903000001.png\" />\n\n年表表示に必要なデータは全部スプレッドシートに保存されてるので、年表表示画面を本体と独立したNext.jsアプリとして作っているのがこだわりポイントです。\n年表表示画面は極力依存を減らし、本体で使ったMaterialUIやfirebaseも使わない構成にしました。\nシンプルに仕上がって大変満足です。\n\nちなみに、こんな感じ↑でみんなのシステム構成を1ページずつまとめた『個人Webサービスシステム構成事典 』が今度の技術書典9で無料頒布されます。（THE TIMELINEの構成図も掲載させてもらってます！）\nなかなか見れない情報がいっぱいあって楽しいと思うので、興味のある方はぜひ読んでみてください。\n\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://techbookfest.org/product/5203085915848704\" data-iframely-url=\"//cdn.iframe.ly/0Zr46O1\"></a></div></div><script async src=\"//cdn.iframe.ly/embed.js\" charset=\"utf-8\"></script>\n\n<br>\n<hr>\n\n### まとめ\nという感じで、ひとまず無事にリニューアルできたっぽいのでよかったです。\nまだNext.js理解しきれてなくてあやしいところもあると思うので、不審な挙動など見かけたらぜひご連絡ください。\n\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://the-timeline.jp\" data-iframely-url=\"//cdn.iframe.ly/y10WkNF?iframe=card-small\"></a></div></div><script async src=\"//cdn.iframe.ly/embed.js\" charset=\"utf-8\"></script>\n\nそれではよい年表ライフを！\n","date":"2020-09-05T12:00+09:00","image":"https://storage.googleapis.com/blog-notsobad/images/20200903000001.png","tag":["つくったもの","年表"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"5orLNCu6TyzBwrQQPJR2CG","type":"Entry","createdAt":"2020-05-27T09:06:27.521Z","updatedAt":"2020-06-13T03:59:50.209Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":5,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"Googleカレンダーで去年の予定を横に並べて表示してくれるやつをつくりました","slug":"kuso-calendar","excerpt":"早いものであっという間に今年もクソアプリの季節がやってきたので、また作りました。 タイトルはそのまんま、「Googleカレンダーで去年の予定を横に並べて表示してくれるやつ」です。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcalendar.notsobad.jp%2F\" title=\"Googleカレンダーで去年の予定を横に並べて表示してくれるやつ\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://calendar.notsobad.jp/\">calendar.notsobad.jp</a></cite>","content":"早いものであっという間に今年もクソアプリの季節がやってきたので、また作りました。 タイトルはそのまんま、「Googleカレンダーで去年の予定を横に並べて表示してくれるやつ」です。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcalendar.notsobad.jp%2F\" title=\"Googleカレンダーで去年の予定を横に並べて表示してくれるやつ\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://calendar.notsobad.jp/\">calendar.notsobad.jp</a></cite>* * *\n\nこの記事は「[クソアプリ2 Advent Calendar 2019](https://qiita.com/advent-calendar/2019/kuso-app2)」19日目の記事です。\n\n🤔これはなに？\n--------\n\n年末年始は1年を振り返ることが多いと思うんですけど、気づくと1ヶ月単位で記憶が抜けてたりしますよね。 あれ3月なにしてたっけ？みたいな。\n\n自分の場合はGoogleカレンダーにけっこう予定を入れてるので、それを見ればだいたい何してたか思い出せるはず。 しかし1年前までさかのぼって確認するのはとても面倒くさいので、ほとんどしたことがありません。\n\nそこで、普段のカレンダー表示の横に、去年の予定を並べて表示できる仕組みを作ってみました。 こんな感じです。\n\n![f:id:o_tomomichi:20191216173523p:plain](https://storage.googleapis.com/blog-notsobad/images/20191216173523.png \"f:id:o_tomomichi:20191216173523p:plain\")\n\nこれは2020年の1月を表示しているのですが、2019年の予定が独立したカレンダーとして登録されていて、2020年にも表示されていることがわかります（モザイクが多くてわかりにくい）。\n\nやっていることは、\n\n*   \\[1\\] Googleカレンダーのデータをicsファイルでエクスポート\n*   \\[2\\] 過去予定の日付を、年だけ2020年に変更する\n*   \\[3\\] 修正したicsをカレンダーに再インポート\n\n\\[1\\]と\\[3\\]はGoogleカレンダーの機能なので、このサービスがやってるのは\\[2\\]の年変換だけですね。 しかし実際やってみると簡単に去年が振り返れてけっこうたのしいので、ご興味あればぜひお試しください。\n\n以下もうちょっと詳しく手順を説明します。\n\n✅ 使い方\n-----\n\n#### \\[1\\] Googleカレンダーのデータをicsファイルでエクスポート\n\nまずはGoogleカレンダーの標準機能で、データをエクスポートしておきます。\n\n> 「設定」→「マイカレンダーの設定」→「カレンダーをエクスポート」\n\n公式のガイドはこちら。  \n[Google カレンダーを書き出す - カレンダー ヘルプ](https://support.google.com/calendar/answer/37111?hl=ja)\n\n#### \\[2\\] 過去予定の日付を、年だけ2020年に変更する\n\n次に、エクスポートしたicsファイルを本サイトで加工します。\n\nシンプルなページなので迷うことはないと思いますが、ファイル選択フォームで先ほどダウンロードしたicsファイルを選択してください。 その後「出力」ボタンをクリックすると、日付けを修正したicsファイルがダウンロードされます。\n\n※カレンダーデータはどこにもアップロードされません。完全にユーザー側のローカルで処理されます（後述）。\n\n#### \\[3\\] 修正したicsをカレンダーに再インポート\n\n最後はGoogleカレンダーに戻って、先ほどエクスポートしたのと同じ画面から、修正後のicsファイルをインポートするだけです。\n\nしかし既存のカレンダーに入れるのではなく、新しいカレンダーを「2019年」とかの名前で作成して、そこにインポートすることをおすすめします。\n\n念のため新規カレンダー作成の公式手順はこちら。  \n[新しいカレンダーを作成する - カレンダー ヘルプ](https://support.google.com/calendar/answer/37095?hl=ja)\n\n💡アピールポイント\n----------\n\n#### 個人情報は一切どこにもアップされません\n\n本サイト上でのカレンダーファイルの修正・エクスポートは完全にローカルで行っており、個人情報が含まれたデータはどこにもアップされたりしません。安心してお使いください。 私は他人のカレンダー情報に一切興味がありませんし、そんなセンシティブなデータをサーバに保管する趣味もありません。\n\nどうしても心配な方はネット接続を切ってオフラインで試してもらうといいんじゃないかと思います。\n\n#### 簡単に過去予定の表示をオンオフできます\n\nこれはGoogleカレンダーの機能でしかないのですが、独立したカレンダーとして取り込むことで、簡単に表示をオンオフできます。 そんなに毎日過去の思い出に浸っててもしょうがないと思うので、ここぞというときに使っていただければと思います。\n\n💩クソアプリの限界\n----------\n\nふつうに自分がほしかった真面目ツールなので何がクソアプリなんだという話なんですが、ご覧いただいたとおり完成度がクソアプリでございます。\n\n*   2019年→2020年の変換しかしません（本当は2018年以前も別カレンダーとして出力したい）\n*   エラー制御とかもちろんしてない\n*   どのブラウザで動くのか知らない（MacのChromeでは動くはず）\n\n今後やる気が出たらちゃんと作り込む可能性も2%くらいありますが、たぶんやらないと思います。。\n\n* * *\n\nまとめ\n---\n\n12月は思ったより忙しくて大変だったけど、何とか今年もクソアプリ作れてよかったです。\n\nちなみに去年はこんなのを作っていました。 <iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.notsobad.jp%2Fentry%2F2018%2F12%2F19%2F104214\" title=\"百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました - NOT SO BADなブログ\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://blog.notsobad.jp/entry/2018/12/19/104214\">blog.notsobad.jp</a></cite>\n\n今年も1年たのしかった気がするので、来年もがんばりたいです。 それではみなさまよいお年を。\n\nおしまい。","date":1576681200000,"image":"https://storage.googleapis.com/blog-notsobad/images/20191216173523.png","tag":["つくったもの","クソアプリ"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"7nlO5xm0vmZCt4N1aDXRNC","type":"Entry","createdAt":"2020-05-27T09:06:29.077Z","updatedAt":"2020-06-13T03:59:55.862Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":5,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"作品の書き出しなども取得できるちょっと便利な青空文庫API「ZORAPI（ゾラピ）」ベータ版を公開しました","slug":"2019/10/01/182951","excerpt":"![f:id:o_tomomichi:20191002085846p:plain](https://storage.googleapis.com/blog-notsobad/images/20191002085846.png \"f:id:o_tomomichi:20191002085846p:plain\")\n\n[ブンゴウメール](https://bungomail.com/)や[ゾラサーチ](https://search.bungomail.com/)など、青空文庫を活用したサービスを色々作っています。 その関係で青空文庫APIがほしくて眠れない日々が続いていたので、作りました。\n\n「AOZORA」+「API」で「ZORAPI（ゾラピ）」です。\n\n[青空文庫API - ZORAPI（ゾラピ）](https://api.bungomail.com/)\n\n「ゾラサーチ」というのが青空文庫を読了時間で検索できるようにしたサービスで、このAPIはそのデータを誰でも使えるように一般公開したものです。 そのため通常の作品情報に加えて、作品の文字数や書き出し・青空文庫での累計アクセス数などの情報も返してくれるあたりがちょっといい感じかと思います。\n\n例えばメロスだとこんな感じ：[https://api.bungomail.com/v0/books/1567](https://api.bungomail.com/v0/books/1567)\n\nまだまだ不具合もありそうだけど、一旦使えるようにはなったので公開してみます。 v0なのでいろいろ許してください（フィードバック大歓迎です）。","content":"![f:id:o_tomomichi:20191002085846p:plain](https://storage.googleapis.com/blog-notsobad/images/20191002085846.png \"f:id:o_tomomichi:20191002085846p:plain\")\n\n[ブンゴウメール](https://bungomail.com/)や[ゾラサーチ](https://search.bungomail.com/)など、青空文庫を活用したサービスを色々作っています。 その関係で青空文庫APIがほしくて眠れない日々が続いていたので、作りました。\n\n「AOZORA」+「API」で「ZORAPI（ゾラピ）」です。\n\n[青空文庫API - ZORAPI（ゾラピ）](https://api.bungomail.com/)\n\n「ゾラサーチ」というのが青空文庫を読了時間で検索できるようにしたサービスで、このAPIはそのデータを誰でも使えるように一般公開したものです。 そのため通常の作品情報に加えて、作品の文字数や書き出し・青空文庫での累計アクセス数などの情報も返してくれるあたりがちょっといい感じかと思います。\n\n例えばメロスだとこんな感じ：[https://api.bungomail.com/v0/books/1567](https://api.bungomail.com/v0/books/1567)\n\nまだまだ不具合もありそうだけど、一旦使えるようにはなったので公開してみます。 v0なのでいろいろ許してください（フィードバック大歓迎です）。* * *\n\nつくったもの\n------\n\n青空文庫には2019年9月現在で約1.6万件の作品データ、約1,000件程度の人物（著者・翻訳者など）データが登録されています。 公式がこれをまとめた巨大なCSVファイルを自動更新で公開してくれているので、基本的にこのデータを検索して返すAPIとなっています。\n\n公式CSVをスプレッドシートに取り込んで公開してるので、どんなデータが返ってくるかはこれを見てもらうのが早いかと。 （実際のResponseフォーマットは一部異なるので、詳細は[ドキュメント](https://api.bungomail.com/)をご参照ください）\n\n[青空文庫API用データ - Google スプレッドシート](https://docs.google.com/spreadsheets/d/1n04e6POI04TBt-3HJUH10-T5cxhPZHcBWmFA4tSHjqE/edit?usp=sharing)\n\n公式CSVは毎日更新されてますが、ほとんどの場合そんなに最新のデータが必要になるわけじゃないと思うので、データ更新は不定期で対応する予定です。APIで取れるデータの最新情報は前述のスプレッドシートで確認してください。\n\n* * *\n\n使い方\n---\n\nbooks, personsそれぞれのエンドポイントに対して、カラム名での検索と、ID指定で特定ドキュメントの取得ができます。 検索は基本完全一致ですが、一部カラムはLIKE検索もサポートしています（後述）。\n\n#### 検索（一覧取得）\n\n*   [https://api.bungomail.com/v0/books?作品名=桃太郎](https://api.bungomail.com/v0/books?作品名=桃太郎)\n*   [https://api.bungomail.com/v0/books?作品著作権フラグ=なし&文字遣い種別=新字新仮名&limit=5](https://api.bungomail.com/v0/books?作品著作権フラグ=なし&文字遣い種別=新字新仮名&limit=5)\n*   [https://api.bungomail.com/v0/persons?人物著作権フラグ=なし&limit=5](https://api.bungomail.com/v0/persons?人物著作権フラグ=なし&limit=5)\n\n検索対象となるのは、スプレッドシートでオレンジ色になっているカラムです。 対象カラムであれば、上記の例のように複数組み合わせて絞り込み（AND検索）することもできます。\n\n#### 特定レコード取得\n\n*   [https://api.bungomail.com/v0/books/1567](https://api.bungomail.com/v0/books/1567)（作品ID）\n*   [https://api.bungomail.com/v0/persons/35](https://api.bungomail.com/v0/persons/35)（人物ID）\n\n詳細な使い方やレスポンスのフォーマットについては[ドキュメント](https://api.bungomail.com)をご参照ください。\n\n* * *\n\nアピールポイント\n--------\n\n### 作品の文字数・書き出し・累計アクセス数も取れる\n\n公式のCSVで得られる情報に加えて、「ゾラサーチ」で利用している独自データも追加しています。 具体的には「作品の文字数」「書き出し」「累計アクセス数」です。\n\n夢が広がりますね。\n\n### LIKE検索も（一部）サポート\n\nFirestoreを使ってるので検索が弱く、基本的に検索は完全一致となります。 たださすがにフリーワード検索したいこともあるので、一部カラムでLIKE検索もサポートしました。\n\nbooksの「作品名」、personsの「姓名」カラムが、それぞれLIKE検索に対応しています。\n\n*   [https://api.bungomail.com/v0/books?作品名=/走れ/&姓名=太宰治](https://api.bungomail.com/v0/books?作品名=/走れ/&姓名=太宰治)\n\nのように`//`で囲んでお使いください。他のカラムとの併用も可能です。\n\nFirestoreで全文検索する方法はこちらの記事を参考にさせていただきました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Foukayuka%2Fitems%2Fd3cee72501a55e8be44a\" title=\"Firestore だけで Algolia を使わず全文検索 - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://qiita.com/oukayuka/items/d3cee72501a55e8be44a\">qiita.com</a></cite>\n\n控えめに言って天才としか言いようがないメソッドですので、Firestore使う方はぜひご参考ください。 感謝しすぎてreact使ったこともないのに「りあクト！」新刊買ってしまいましたw\n\n* * *\n\n限界\n--\n\nこんな感じのAPIなんですが、無料運営にこだわってFirestoreに依存している結果、弱点も多いです。許してください。\n\n##### 並べ替えができない\n\nすべてのレスポンスが「累計アクセス数↓・作品ID↑」順でソートされております。 これ以外でのソートはできません。文字数とか名前とかで並べたいよね。ごめんね。\n\nしかし複合indexの組み合わせが爆発するので、とてもすべてはindexできそうにありません。 どうしてもこの条件でソートしなければ死ぬ、とかの要件があればご相談ください。 （でもそこまで追い詰められてたら自前でデータ取り込んで検索したほうがいいと思います）\n\n##### アクセス数が爆増したら登録制にするかも\n\nFirebaseの無料プランで運営しているため、当然使用量に制限があります。 検索結果は超長期でCDNキャッシュする予定ですが、それでもアクセスが多すぎる場合は登録制にして利用を制限するかもしれません。あらかじめご了承ください。たぶんそんなことにはならないと思うんですけど。\n\nまた全データ取得の目的でAPI投げまくるとかを検討されている場合、たぶん公開してるスプレッドシートをダウンロードして直接読み込んでもらったほうがお互いハッピーだと思いますので、ぜひそちらをご検討ください。\n\n* * *\n\nまとめ\n---\n\nという感じで、まぁいろいろ制限はありますが何とか使えなくもないAPIができたんじゃないかと思います。\n\nがんばりすぎずに長生きしてほしいなと思ってますので、これでもいいよという方はぜひ使ってみてください。 バグや改善要望、使ってみたレポートもお待ちしておりますよ。\n\nおしまい。","date":1569922191000,"image":"https://storage.googleapis.com/blog-notsobad/images/20191002085846.png","tag":["つくったもの","ゾラサーチ","ZORAPI","青空文庫"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"1SE2cNJulQLzNKJU96JJpQ","type":"Entry","createdAt":"2020-05-27T09:06:31.379Z","updatedAt":"2020-06-13T04:00:02.975Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":5,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"青空文庫の作品を目安の読了時間で検索できるサービス「ゾラサーチ」をリリースしました","slug":"2019/04/04/133409","excerpt":"![f:id:o_tomomichi:20190403115005p:plain](https://storage.googleapis.com/blog-notsobad/images/20190403115005.png \"f:id:o_tomomichi:20190403115005p:plain\")\n\nタイトルのまんまですが、また地味なサービスを作りました。 よかったら見てみてください。\n\n\\[2020.4.1追記\\]  \nサービス名を「ゾラサーチ」から「ブンゴウサーチ」に変更しました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fsearch.bungomail.com%2F\" title=\"ゾラサーチ by ブンゴウメール | 青空文庫の作品を読了時間で検索できるサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://search.bungomail.com/\">search.bungomail.com</a></cite>","content":"![f:id:o_tomomichi:20190403115005p:plain](https://storage.googleapis.com/blog-notsobad/images/20190403115005.png \"f:id:o_tomomichi:20190403115005p:plain\")\n\nタイトルのまんまですが、また地味なサービスを作りました。 よかったら見てみてください。\n\n\\[2020.4.1追記\\]  \nサービス名を「ゾラサーチ」から「ブンゴウサーチ」に変更しました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fsearch.bungomail.com%2F\" title=\"ゾラサーチ by ブンゴウメール | 青空文庫の作品を読了時間で検索できるサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://search.bungomail.com/\">search.bungomail.com</a></cite>* * *\n\nこれはなに？\n------\n\n青空文庫の作品を目安の読了時間で検索できるサービスです。 たとえばこんな感じで、「5分で読める芥川竜之介の短編」みたいに探すことができます。\n\n![f:id:o_tomomichi:20190330163010p:plain](https://storage.googleapis.com/blog-notsobad/images/20190330163010.png \"f:id:o_tomomichi:20190330163010p:plain\")\n\n[5分以内で読める芥川竜之介の短編作品 | ゾラサーチ](https://search.bungomail.com/authors/879/categories/flash/books)\n\nもちろん読書スピードは人によって激しく違うので、あくまで目安として参考にしてください。 （読了時間の算出基準などは[こちら](https://search.bungomail.com/about)に書いています）\n\nまた作品の文字数（これも目安ですが）も載せているので、慣れてきたらそこから自分の読了時間を大体予測できるかもしれません。\n\nアピールポイント\n--------\n\n*   デフォルトで人気の作品順に並ぶのでいい感じに探せる（※）\n*   本の書き出し部分もチラ見せしてくれる（スマホでは作品詳細画面のみ）\n*   けっこうサクサク動く（はず）\n\n※作品の人気度は、過去10年分の青空文庫アクセスランキングの累計を基に算出。\n\nなんで作ったの？\n--------\n\n青空文庫の公式サイトは一覧性を重視した作りになっていて、特定の本を探すには便利ですが、知らない本と出会うのはなかなか難しかったりします。 なのでそれを解決するサービスを作りたいと思ったのが開発の動機です。\n\n特に自分の場合だと、実際に読む前にその本の長さがけっこう気になります。 「今日は1日カフェにこもってじっくり長編を読むぞー」なのか、「寝る前に30分くらいでさくっと読める短編ないかなー」なのか。\n\nしかし現状の青空文庫では実際に作品を選ばないとどれくらいの長さなのかわからないので、なかなかこのニーズにマッチしません。 また青空文庫リーダー系のアプリもいくつか見ましたが、同様の機能を提供するものはなさそうです。なので作りました。\n\nほんとにそれだけ？\n---------\n\n鋭いですね。実は他にも背景があります。\n\n#### ブンゴウメールというのをやってまして\n\n青空文庫の作品を小分けにして毎日メールで配信してくれる、「ブンゴウメール」というサービスを運営しています。 （意外とおもしろいので、まだの方はぜひ登録してね）\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fbungomail.com\" title=\"ブンゴウメール | 1日3分のメールでムリせず毎月本が読める、忙しいあなたのための読書サポートサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://bungomail.com\">bungomail.com</a></cite>\n\n最近忙しくて読書できていない方や、ふだんあまり文学を読まない方からも多く利用いただいています。 で、うれしいことに「ブンゴウメールをきっかけに読書の習慣ができて、自分でも本を読むようになった」という報告をいただいたりします（うれしい！）。\n\nというわけで、「ブンゴウメールで初めて夢野久作を読んで、他の作品も読んでみたくなった」みたいな方がいい感じに次の本を探せるサービスを作りたい、というのも制作の背景としてありました。（逆にブンゴウメールへの集客施策の一環という位置づけもあります）\n\nさらにちなみの裏話としては、ブンゴウメールのために青空文庫の全作品のテキストを解析して分割保存するということをしており、せっかくなのでこの大量に溜まったデータを何か活用できないかなーという背景もありました。\n\n※青空文庫は作品データをすべてGithubに公開してくれており、ブンゴウメール・ゾラサーチともそこからデータを取得して利用しています。クローリングなどによる青空文庫本体へのシステム負荷は一切ありませんので安心してお使いください。\n\n#### 青空文庫にもお返ししたい\n\nとってつけたように最後に書いてますが、実はこれもずっと考えていたことでして。\n\nご存知の方も多いと思いますが、青空文庫の作品はボランティアの方によってひとつひとつ入力されています。 青空文庫自体がもはや一種のインフラみたいな存在になっていますが、それが存在できているのは全然当たり前のことではないのです。\n\n自分も青空文庫の恩恵を多大に受けているので、何かお返しをしたいとは常々思ってまして。 その一環として、ブンゴウメールの有料版を作って収益の一部を青空文庫の活動支援に還元するということも始めました。\n\n[https://bungomail.com/pro](https://bungomail.com/pro)\n\nただ残念ながら金額的に大した貢献にはならないので（マネタイズむずかしい）、もっと自分が得意なところで何か貢献したいなと。 というわけで、Webエンジニアらしく青空文庫をもっと便利にするサービスを開発してみたという背景もありました。\n\nちなみに、青空文庫には現状専属のエンジニアがおらず、ボランティアベースで維持・改善が行われている状態です。 （それであの規模のシステムが稼働し続けているのは本当にすごい）\n\n有志による青空文庫を技術的に支える活動「aozorahack」というのもあるので、興味のある方はぜひ参加してみてください！ （自分はまだ何も貢献できてない。。）\n\n[aozorahack](https://aozorahack.org/)\n\n* * *\n\nまとめ\n---\n\nというわけで、個人的にはけっこう便利なサービスになったので満足しております。 何か新しい本読んでみようかなーというときにでもぜひお使いください。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fsearch.bungomail.com\" title=\"ゾラサーチ by ブンゴウメール | 青空文庫の作品を読了時間で検索できるサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://search.bungomail.com\">search.bungomail.com</a></cite>\n\n引き続きブンゴウメールもよろしくね。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fbungomail.com\" title=\"ブンゴウメール | 1日3分のメールでムリせず毎月本が読める、忙しいあなたのための読書サポートサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://bungomail.com\">bungomail.com</a></cite>\n\nおしまい。","date":1554352449000,"image":"https://storage.googleapis.com/blog-notsobad/images/20190403115005.png","tag":["つくったもの","ゾラサーチ","ブンゴウメール","青空文庫"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"55CHTP22rvN2J4UwajEwsQ","type":"Entry","createdAt":"2020-05-27T09:06:34.396Z","updatedAt":"2020-06-13T04:00:12.203Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":5,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"百人一首の詠み上げを音声認識していち早く下の句を教えてくれるクソアプリを作りました","slug":"2018/12/19/104214","excerpt":"この記事は「[クソアプリアドベントカレンダー2018](https://qiita.com/advent-calendar/2018/kuso-app)」19日目の記事です。\n\n![f:id:o_tomomichi:20181122175103p:plain](https://storage.googleapis.com/blog-notsobad/images/20181122175103.png \"f:id:o_tomomichi:20181122175103p:plain\")\n\nタイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcheetah.notsobad.jp%2F\" title=\"百人一首チーター\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://cheetah.notsobad.jp/\">cheetah.notsobad.jp</a></cite>","content":"この記事は「[クソアプリアドベントカレンダー2018](https://qiita.com/advent-calendar/2018/kuso-app)」19日目の記事です。\n\n![f:id:o_tomomichi:20181122175103p:plain](https://storage.googleapis.com/blog-notsobad/images/20181122175103.png \"f:id:o_tomomichi:20181122175103p:plain\")\n\nタイトルそのまんまですが、 百人一首の詠み上げを音声認識して、いち早く下の句を教えてくれるクソアプリ「百人一首チーター」を作りました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fcheetah.notsobad.jp%2F\" title=\"百人一首チーター\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://cheetah.notsobad.jp/\">cheetah.notsobad.jp</a></cite>* * *\n\nデモ動画\n----\n\n※音が出ます\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/w3aSj6FSnRk\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\"></iframe>\n\n画面上部に音声認識した結果をそのまま出力していて、それをもとに正解と思われる確率が高い百人一首の句を画面下部「判定結果」のところに上位3つまで表示しています。\n\n映像だけ見ると認識開始までにタイムラグがあるように見えますが、読み上げが始まるまで間が空いただけです（動画作りがヘタ）。 実際に読み上げが始まってからはちょっと感動するくらいのスピードで正確に認識してくれてます。\n\nなんで作ったの？\n--------\n\n毎年正月は実家で親戚の集まりがあるのですが、数年前から小学生の甥っ子？も交えてみんなで百人一首をやるようになりました。\n\n初年度こそ大人げなく勝利したものの、すっかりハマった甥っ子はそれから本格的に百人一首を覚えて（百人一首クラブに入ったらしい）、次の年からは大人が誰も勝てなくなってしまいましたw\n\nこっちは毎年記憶も衰える一方なので、このままでは永遠に勝ち目がありません。また甥っ子に気を遣わせたり手加減を覚えさせるのも本意ではありません。\n\nというわけで、大人の技術力を使ったこのチートツールで今年こそ甥っ子に社会の厳しさを教えてやりたいというのが開発の背景です（半分くらい本気）。\n\n技術的な話\n-----\n\nペライチの静的なページをGithubPagesでホスティングしています。 メインの処理は素のJavascriptでわずか50行くらい。[Githubで公開](https://github.com/notsobad-jp/cheetah)してますのでよければ見てみてください。（コードが汚いのは許して！）\n\n一番コアの音声認識の部分は、HTML5の[Speech Recognition API](https://developer.mozilla.org/ja/docs/Web/API/Web_Speech_API)を使っています。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2FPonDad%2Fitems%2F4ca433ad03efbf7499a2\" title=\"ブラウザで音声操作をする。（Speech Recognition API） - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://qiita.com/PonDad/items/4ca433ad03efbf7499a2\">qiita.com</a></cite>\n\n対応しているのは今のところPCとAndroidのChromeのみですが、これが異常に便利で精度が高い。\n\n音声認識した文字列と百人一首データのマッチングでもっと手こずるかと思ってたんですが、音声認識が恐ろしい精度でほぼ完全な文字列を返してくるから、かなり適当な処理でも充分実用的なマッチング精度にできました。\n\n実際にやってる処理は、認識した文字列を1文字ずつに分解して、100首の中でマッチする文字数が多い順に返す、という感じです（なんて適当な…）。\n\nしかし試してみると思ったよりタイムラグも少ないし、マッチングの精度もなかなか高いしで完全に満足してしまいました。 まぁクソアプリですし🍣。\n\nえ、百人一首を持ってないから遊べない？\n-------------------\n\nそんなときはスマホを取り札にして百人一首すればいいじゃないですか。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fkarta.notsobad.jp%2F\" title=\"スマホde百人一首\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://karta.notsobad.jp/\">karta.notsobad.jp</a></cite>\n\nなんとユーザー登録も不要、URLをシェアするだけで超お手軽にスマホが取り札になって百人一首が遊べるぞ〜。\n\n* * *\n\nまとめ：クソアプリはよいぞ\n-------------\n\nというわけで、実質開発2日くらいのちょうどいい感じでクソアプリを作ることができました。 （メインのロジック1日＋もろもろ仕上げるのに1日くらい）\n\n普段の開発で絶対使わない技術を使ったりできるのもクソアプリ開発のいいところですね。音声認識なんてやる予定全然なかったけど、ここまで簡単で精度が高いとは思いませんでした。\n\nクソアプリは年末のお祭りみたいな感じで楽しいので、来年もぜひやってみたいと思います。気になった方もぜひどうぞ。\n\n明日はいよいよクソアプリ界の重鎮、あんどさんです。お楽しみに！ <iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fampersand.qrunch.io%2Fentries%2FzqnaH3UJ7Uq2RmwD\" title=\"クソアプリアドベントカレンダーに関するつぶやきと振り返り\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://ampersand.qrunch.io/entries/zqnaH3UJ7Uq2RmwD\">ampersand.qrunch.io</a></cite>","date":1545183734000,"image":"https://storage.googleapis.com/blog-notsobad/images/20181122175103.png","tag":["つくったもの","クソアプリ"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"36Ae41dNXqVuVDk99hrmLH","type":"Entry","createdAt":"2020-05-27T09:06:43.404Z","updatedAt":"2020-06-13T04:00:41.504Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"青空文庫の短編を1ヶ月で読み切れるように小分けして毎日メールで配信してくれる「ブンゴウメール」をリリースしました","slug":"2018/04/25/160259","excerpt":"めっちゃ小粒ですが、久々にWebサービスつくりました。 ブンゴウメールといいます。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fbungomail.notsobad.jp%2F\" title=\"ブンゴウメール | 1日3分のメールでムリせず毎月本が読める、忙しいあなたのための読書サポートサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://bungomail.notsobad.jp/\">bungomail.notsobad.jp</a></cite>","content":"めっちゃ小粒ですが、久々にWebサービスつくりました。 ブンゴウメールといいます。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fbungomail.notsobad.jp%2F\" title=\"ブンゴウメール | 1日3分のメールでムリせず毎月本が読める、忙しいあなたのための読書サポートサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://bungomail.notsobad.jp/\">bungomail.notsobad.jp</a></cite>これはなに？\n------\n\n青空文庫の作品を毎月1作品、1ヶ月で読み切れるように小分けにして毎日メールで配信してくれるサービスです。\n\n※青空文庫とは？はこちらをどうぞ。\n\n> 青空文庫は、誰にでもアクセスできる自由な電子本を、図書館のようにインターネット上に集めようとする活動です。 著作権の消滅した作品と、「自由に読んでもらってかまわない」とされたものを、テキストとＸＨＴＭＬ（一部はＨＴＭＬ）形式に電子化した上で揃えています。 [https://www.aozora.gr.jp/guide/aozora\\_bunko\\_hayawakari.html](https://www.aozora.gr.jp/guide/aozora_bunko_hayawakari.html)\n\nブンゴウメールでは、このうち著作権の切れた過去の名作を中心にメールで配信します。\n\n1日3分くらいのメールが毎日届いて、読み続けるといつのまにか毎月1冊本が読めてしまうというサービスになっております。\n\nなんでつくったの？\n---------\n\n自分が最近本を読めていないことに危機感を感じており、何とか読める仕組みを作りたいと思ったからです。\n\n本を読めていない理由は人それぞれだと思いますが、わたしの場合は\n\n*   忙しくて時間が取れない\n*   スキマ時間はあるんだけど、ついついスマホを見てしまう\n*   数分で消費できるコンテンツに慣れすぎて、長文を読むのにけっこう気合がいる\n*   いざ本を読もうとしても、どうしても仕事の本を優先して読んでしまう\n\nという感じです。はてブとTwitterはめっちゃ見てるのに。\n\nしかしやっぱり、仕事に関係ない本ももっと読みたい。 ということで、うまくふだんの行動の中に落とし込めば小説も読めるんじゃないかと思い、毎日小分け配信の仕組みを作りました。\n\nアピールポイント\n--------\n\n*   メールの送信者名を作者にしてるので、受信箱に文豪が並んでたのしい\n*   メール読んでるようにしか見えないので、仕事中でも堂々と読める\n*   どうしても続きが気になるときは、青空文庫に行けば無料で今すぐ続きが読める\n\n実際使ってみてどうかというと\n--------------\n\n4月はテストで運用してみましたが、なかなかよさそうな感じです。 これくらいの長さなら、メールチェックのタイミングでさらっと読めそう。\n\nまぁ作品によっては旧仮名遣いがしんどいなーとか、3分を超える分量になるとやっぱりきついなーとかありますが、そのへんはこれから様子を見て調整していければと思います。\n\nメールじゃなくてもいいよ\n------------\n\nメールで配信とは言ってますが、好きな方法で読めるようにRSSフィードも用意しました。\n\n[https://us11.campaign-archive.com/feed?u=c71a56a796830e0127965ec03&id=84b6341409](https://us11.campaign-archive.com/feed?u=c71a56a796830e0127965ec03&id=84b6341409)\n\n#### 📡ブログのようにRSSリーダーで読みたい\n\n上記のRSSフィードを購読すれば、ふつうのブログのようにRSSリーダーで読めます。\n\nまたRSSフィードはブンゴウメール公式ブログに反映されるようにしていますので、わからない方はこっちで購読しても同じ内容が読めます。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fbungomail.hatenablog.com%2F\" title=\"ブンゴウメール公式ブログ\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://bungomail.hatenablog.com/\">bungomail.hatenablog.com</a></cite>\n\n#### 🤖Slack連携したい\n\nどうしてもすべてをSlack上で消化したいという性癖の方は、上記RSSフィードをチャネルに流せばいいと思います。\n\n🚧 注意\n-----\n\n*   配信開始は2018年5月からの予定です。もうしばらくお待ちください。\n*   配信メールは、「bungomail@notsobad.jp」から届きます。配信許可の設定が必要な方はご登録お願いします。\n\n今後の予定\n-----\n\nまずはユーザーが増えたときに、ちゃんと読書が続くのかというところを検証したいと思っています。 まだまだサンプルが少ないので、ユーザーを増やした上でコンテンツの長さとか配信方法の最適化を目指します。\n\nまた当たり前ですが、このサービスは青空文庫というすばらしい基盤があって初めて成り立つものです。 今のところまったくマネタイズの予感はないですが、うまく収益化の仕組みを作れたら青空文庫の活動支援に還元できるとよいなーと思っています。がんばる。\n\n* * *\n\nまとめ\n---\n\nとりあえず、少なくとも自分が使い続けたいものを作れたのでひとまず満足しています。 5月から正式に配信開始しようと思いますので、よければぜひご登録くださいませ。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fbungomail.notsobad.jp%2F\" title=\"ブンゴウメール | 1日3分のメールでムリせず毎月本が読める、忙しいあなたのための読書サポートサービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://bungomail.notsobad.jp/\">bungomail.notsobad.jp</a></cite>\n\nおしまい。","date":1524639779000,"image":"https://storage.googleapis.com/blog-notsobad/images/20180425153835.png","tag":["つくったもの","ブンゴウメール"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"5cYXKlZ5aKbNYlpNyioguv","type":"Entry","createdAt":"2020-05-27T09:07:00.853Z","updatedAt":"2020-06-13T04:01:39.248Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"これまで6年間に個人で開発してきた7個のWebサービスを振り返って、サービス開発のモチベーションを考えてみた","slug":"2016/12/30/Webサービス個人開発のモチベーション","excerpt":"むかし、Webサービスを自分でも作れるようになりたい！と一念発起して、26歳文系未経験からWeb業界に転職しました。\n\n結局仕事ではエンジニアじゃなくディレクターになってしまったのですが、個人開発でこれまでいろんなサービスを作ってきました。\n\nというわけで自分用の備忘として、これまでの個人開発でつくったものの記録です。\n\nだいぶ長文になってしまったので、おヒマなときにでもお読み下さい。","content":"むかし、Webサービスを自分でも作れるようになりたい！と一念発起して、26歳文系未経験からWeb業界に転職しました。\n\n結局仕事ではエンジニアじゃなくディレクターになってしまったのですが、個人開発でこれまでいろんなサービスを作ってきました。\n\nというわけで自分用の備忘として、これまでの個人開発でつくったものの記録です。\n\nだいぶ長文になってしまったので、おヒマなときにでもお読み下さい。目次\n--\n\n*   ブンゴウフリック\n*   booklovesmusic\n*   百/一\n*   THE TOURNAMENT\n*   スマホde百人一首\n*   Tab Sekki\n*   THE TIMELINE\n\n以下年代順に、それぞれのサービスを作ったときのこと。\n\n* * *\n\nブンゴウフリック（2011年）\n===============\n\n![f:id:o_tomomichi:20161228133148p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228133148.png \"f:id:o_tomomichi:20161228133148p:plain\")\n\n※サービス終了\n\nApplefanさんでレビューいただいているものが残っていました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.applefan2.com%2F25356\" title=\"【ブンゴウフリック】文豪が記した印象的な一節を書き写せるアプリ。作品の味わい深さを感じ取ろう。\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://www.applefan2.com/25356\">www.applefan2.com</a></cite>\n\n#### 技術/環境\n\n*   iPhoneアプリ\n*   Titanium（JS）\n\n#### ひとこと紹介\n\n「ブンゴウフリック」は、文豪の残した趣ある一節を書き写して、作品のリズムや味わい深さを感じ取るためのアプリです。\n\n#### 制作事情\n\n記念すべき初めてのサービスで、なぜかいきなりiPhoneアプリ。 このあと現在に至るまで基本アプリには手を出していないので、いま振り返るとなんでそっち行った感が半端ない。\n\nでも2011年当時はやっぱりスマホアプリって超かっこよかったし、アプリ作れるってすごく夢があったんですよね。\n\nそのときは完全初心者からPHPを仕事で３ヶ月ほどさわったくらいのぺーぺーだったので、とてもObjective-Cなんて手を出せず（いまも出せない）。\n\nJavascript（まださわったことなかったけど）というとても汎用的な言語でアプリが作れるらしい、という触れ込みにクラっときて、ついついTitaniumに手を出してしまったみたいです。\n\nちなみにこの頃はコードのバージョン管理なんて概念はまだなかったし、もう手元にソースも存在しておりません。\n\n自分で動くもの作ってるっていうのが楽しくてしょうがなかったので、とにかく作りあげることに集中してました。 毎週末カフェに集まって、同じようにアプリ開発してる友人と一緒に作業してたのがなつかしい。\n\n結果的にいくつかレビューサイトでも取り上げていただいて、数千インストールくらいは達成してました。\n\nそのときはよくわからなかったけど、いま思うとなかなか悪くない数字な気がします。\n\n* * *\n\nbooklovesmusic（2011年）\n=====================\n\n![f:id:o_tomomichi:20161228141421p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228141421.png \"f:id:o_tomomichi:20161228141421p:plain\")\n\n※サービス終了\n\nLifehackerさんで紹介いただいた記事はこちら。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.lifehacker.jp%2F2012%2F05%2F120507booklovesmusic.html\" title=\"読書にぴったりの音楽をおすすめし合うサービス｢booklovesmusic｣\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://www.lifehacker.jp/2012/05/120507booklovesmusic.html\">www.lifehacker.jp</a></cite>\n\n#### 技術/環境\n\n*   CakePHP\n*   ロリポップ\n\n#### ひとこと紹介\n\nbooklovesmusic(ブック・ラブズ・ミュージック)は、いま読んでいる本にぴったりの音楽をおすすめしてくれるサービスです。\n\n#### 制作事情\n\n前作ブンゴウフリックでアプリに懲りたあと、Webに戻ってはじめて本格的にフレームワークとか使ってみた事案。\n\nこのときでWeb業界に入ってちょうど半年くらいだったような。\n\nMVCとか研修では聞いたけど全然理解しきれてなくて、CakePHPで自動生成される複雑なフォルダ構成に絶望感を覚えたことが印象的です。\n\nいま振り返るとシステム的にはけっこうやばくて、\n\n*   コードのバージョン管理はまだ導入してない\n*   ステージングとかないので本番一発勝負\n*   なのにデプロイはFTPで、壊れたけど元に戻せなくて泣きそうになってた\n*   YoutubeAPIのライブラリを入れたけど、動かないのでgrepしてライブラリ内のパスを全部手動で書き換えた\n\nと、無邪気に好き放題してました。楽しかった。。\n\nありがたいことにリリース後いくつかのメディアやブログなどで取り上げていただき、それなりにユーザーも集まりました。\n\n特にLifehackerさんで紹介いただいた時はアクセスが集中し、ロリポップの最安プランで動いてたシステムは一瞬で落ちました。\n\nこのサービスで何より学んだのは、「自分の作ったものが評価されるというのは最高に気持ちいい」という強烈な体験でした。\n\n今でも時々リニューアルを考えてみたりするくらい、非常に思い入れの強いサービスです。\n\n* * *\n\n百/一（2013年）\n==========\n\n![f:id:o_tomomichi:20161228144142p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228144142.png \"f:id:o_tomomichi:20161228144142p:plain\")\n\n※サービス終了\n\nがんばって自分で書いたプレス記事はこちら。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.value-press.com%2Fpressrelease%2F108108\" title=\"百人一首を１ヶ月くらいで覚えるためのサービス「百/一[ひゃくいち]」リリース | ValuePress!\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://www.value-press.com/pressrelease/108108\">www.value-press.com</a></cite>\n\n#### 技術/環境\n\n*   Rails\n*   Heroku\n\n#### ひとこと紹介\n\n百/一（ひゃくいち）は、うまいこと設計された学習システムによって、百人一首をだいたい１ヶ月くらいでおぼえることができるサービスです。\n\n#### 制作事情\n\n前作からちょっと時間が空いてるのは、この間にFjordさんのリモートインターンに参加して、Railsの勉強をしていたからですね。\n\n[http://fjord.jp/internship](http://fjord.jp/internship)\n\nでその卒業制作として（勝手に）作ったのがこの「百/一」でしたが、結果的に前2作に比べても全然泣かず飛ばずの悲しい結果になってしまいました。\n\n前作のbooklovesmusicは「一発ネタ」っぽいところがあり、継続して使ってくれる人がいなかったという問題意識がありました。\n\n集客はできたんだから、次はちゃんと使い続けてもらえるものを作りたい、というくらいの気持ちだったんですが、まぁちょっと調子に乗ってたんでしょうね。\n\n百人一首は好きなテーマなのでこのときは不完全燃焼感があったのですが、後に「スマホde百人一首」をリリースして、個人的には多少リベンジできた感じです。\n\n* * *\n\nTHE TOURNAMENT（2014年）\n=====================\n\n![f:id:o_tomomichi:20161228150156p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228150156.png \"f:id:o_tomomichi:20161228150156p:plain\")\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fthe-tournament.jp%2Fabout\" title=\"THE TOURNAMENT | 簡単・便利な無料のトーナメント表作成サービス\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://the-tournament.jp/about\">the-tournament.jp</a></cite>\n\n#### 技術/環境\n\n*   Rails\n*   Heroku\n*   TwitterBootStrap\n\n#### ひとこと紹介\n\nTHE TOURNAMENT(ザ・トーナメント)は、簡単・便利な無料のトーナメント表作成サービスです。\n\n#### 制作事情\n\nようやく現在も運用中のサービスが出てきました。\n\n前作「百/一（ひゃくいち）」の失敗を受け、いろいろ反省して作ったサービスです。 結果的に今まで作ったなかで運用期間も最も長く、自分の代表作といえるサービスになりました。\n\n*   はじめて個人で作ったWebサービスで、売り上げを上げることができた（有料プランの販売）\n*   SEOを意識して、狙ったワードで検索上位に上げることができた\n*   同時アクセス1万という、自分にとっては過去最高のアクセス量をさばく設計にできた\n\nとはいえ初めて売り上げを上げるまでに3年もかかってるし、全然いばれる金額でもないのですが、 自分が作ったWebサービスにお金を払ってくれる人がいるというのは、はっきり言って死ぬほどうれしかったです。\n\nお金が入るのはもちろんうれしいんですが、何というか、お金を払ってでもそのサービスを使いたい、と思ってもらえるものを作れたというのが、やはり作ってる側としてはめちゃめちゃうれしいですね。\n\n* * *\n\nスマホde百人一首（2015年）\n================\n\n![f:id:o_tomomichi:20161228152819p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228152819.png \"f:id:o_tomomichi:20161228152819p:plain\")\n\n[https://karta.notsobad.jp/](https://karta.notsobad.jp/)\n\n#### 技術/環境\n\n*   Sinatra\n*   Heroku\n*   SemanticUI\n\n※後にFirebaseでリニューアル\n\n#### ひとこと紹介\n\nスマホde百人一首は、みんなのスマホを取り札にして遊べる、お正月にぴったりの百人一首サービスです。\n\n#### 制作事情\n\nTHE TOURNAMENTを作ったあと、自分の中でサービスを作るモチベーションみたいなのが多少変わっていました。\n\nいわゆるフルスペックのWebサービスをがっつり作るのはある程度満足したけど、やっぱり定期的に新しいものは作りたくなるし、ときどきはゼロイチでモノを作らないと新しい技術から取り残されてしまうし、みたいな危機感もあったり。\n\nというわけで小規模なサービスでシンプルにネタ勝負！として作ったのがこの「スマホde百人一首」です。\n\n*   ユーザー登録とか一切不要で、QRコード読み込むだけでその場のみんなで一緒に遊べる\n*   アプリじゃなくてただのWebなのに、みんなのブラウザが勝手に同期して更新される\n\nというところが、企画的にも技術的にもちょっとおもしろいことができたんじゃないかというところです。\n\nユーザー登録させない利便性みたいなところは、調整さんリスペクト。\n\n百人一首というテーマでそれなりに満足いくものが作れたという意味でも、個人的にお気に入りのサービスです。\n\n* * *\n\nTab Sekki（2016年）\n================\n\n![f:id:o_tomomichi:20161231230331p:plain](https://storage.googleapis.com/blog-notsobad/images/20161231230331.png \"f:id:o_tomomichi:20161231230331p:plain\")\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Ftab-sekki-%25E4%25BA%258C%25E5%258D%2581%25E5%259B%259B%25E7%25AF%2580%25E6%25B0%2597%25E4%25B8%2583%25E5%258D%2581%25E4%25BA%258C%25E5%2580%2599%2Fhpiplbccmdafmjoompeplcakgghggcfh\" title=\"Tab Sekki - 二十四節気七十二候\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://chrome.google.com/webstore/detail/tab-sekki-%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AF%80%E6%B0%97%E4%B8%83%E5%8D%81%E4%BA%8C%E5%80%99/hpiplbccmdafmjoompeplcakgghggcfh\">chrome.google.com</a></cite>\n\n#### 技術/環境\n\n*   Chrome拡張\n*   Javascript\n*   SemanticUI\n\n#### ひとこと紹介\n\nTabSekkiは、ブラウザの新しいタブに二十四節気七十二候の現在の暦を表示してくれるChrome拡張機能です。\n\n#### 制作事情\n\nChrome拡張に初挑戦。\n\nあたらしいものを作りたいけどとにかくメンテナンスがめんどくさくて、 作りっぱなしで満足できるものが作りたくなって発作的に作ったやつです。\n\n技術的には何にもおもしろいことしてないけど、デザインは自分なりになかなかがんばりました。\n\nとくに言うこともないくらいシンプルなサービスだけど、個人的にほしかったものを作ったので自分は愛用しています。\n\n72候それぞれで色が違うので、見慣れた頃に急に新しいタブが違う色になって、ああ季節変わったんだーって気付けるのが個人的には超いい感じです。\n\nやっぱり個人開発の基本はドッグフーディング。\n\n* * *\n\nTHE TIMELINE（2016年）\n===================\n\n![f:id:o_tomomichi:20161228153959p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228153959.png \"f:id:o_tomomichi:20161228153959p:plain\")\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fthe-timeline.jp%2F\" title=\"簡単・便利な無料の年表作成サービス | THE TIMELINE(ザ・タイムライン)\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://the-timeline.jp/\">the-timeline.jp</a></cite>\n\n#### 技術/環境\n\n*   Riot.js\n*   Firebase\n*   SemanticUI\n\n#### ひとこと紹介\n\nTHE TIMELINE(ザ・タイムライン)は、簡単・便利な無料の年表作成サービスです。\n\n#### 制作事情\n\n最新作は、トーナメント以来久々にがっつりのWebサービスです。\n\nトーナメントは非常に気に入ってるサービスではあるのですが、何で自分がこれを運用しているのか、という社会的意義みたいなところが弱い部分ではありました。ニーズから逆算して作ったサービスゆえの弱みですね。\n\nそんななか、THE TOURNAMENTで学んでうまくいったところは活かしつつ、自分が社会を積極的にこう変えていきたい、という思いを込めたサービスを世に出したいという思いはずっとあり、ようやく多少はそれに合致するかなと思えたのがこの「THE TIMELINE」です。\n\n年表作成ってふつうに生きてるとまずしないと思うんですが、作ってみるとめちゃくちゃおもしろいわけですよ。\n\nこち亀が40年続いてすごい！っていうのも、こうやって年表にするとそのすごさが視覚的にわかるし。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.notsobad.jp%2Fentry%2F2016%2F12%2F15%2F%25E9%2580%25B1%25E5%2588%258A%25E5%25B0%2591%25E5%25B9%25B4%25E3%2582%25B8%25E3%2583%25A3%25E3%2583%25B3%25E3%2583%2597%25E3%2581%25A7%25E9%2580%25A3%25E8%25BC%2589%25E4%25B8%25AD%25E3%2581%25AE%25E3%2583%259E%25E3%2583%25B3%25E3%2582%25AC%25E3%2582%2592%25E5%25B9%25B4%25E8%25A1%25A8%25E3%2581%25A7%25E6%2595%25B4%25E7%2590%2586\" title=\"週刊少年ジャンプで連載中のマンガを年表で整理してみた。 - NOT SO BADなブログ\" class=\"embed-card embed-blogcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://blog.notsobad.jp/entry/2016/12/15/%E9%80%B1%E5%88%8A%E5%B0%91%E5%B9%B4%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%81%A7%E9%80%A3%E8%BC%89%E4%B8%AD%E3%81%AE%E3%83%9E%E3%83%B3%E3%82%AC%E3%82%92%E5%B9%B4%E8%A1%A8%E3%81%A7%E6%95%B4%E7%90%86\">blog.notsobad.jp</a></cite>\n\nだまされたと思って一度年表つくってみると、絶対おもしろいこと間違いなしです。\n\nというのが企画的な話なんですが、技術的には数年間お世話になってRails x Herokuを離れて、 Riot x Firebaseという新しいフレームワークに手を出しています。\n\nどちらも学習コストが低くて今のところかなりいい感じなので、 もうちょっとこなれてきたらトーナメントもフルリニューアルありえるで。。\n\n* * *\n\nまとめ\n===\n\nという感じでいままで作ってきたものを振り返ってみました。\n\nモチベーション的には、\n\n*   最初はとにかく作ってるだけで楽しい\n*   次はユーザーもっと増やしたい、お金稼げるようにしたい、技術的におもしろいことしたい、志のあることをしたい、とどんどん要求が高くなる\n*   とはいえ一度クリアしたのを毎回クリアできるわけでもなく、前作より集客失敗して空回りとかもよくある\n\nという感じで、できることも増えたけどその分自分の満足のハードルも上がっちゃって、やっぱり毎回手探りでがんばってますという感じですね。。\n\nあと6年で7個って少ない気もするけど、実際にはこの間に制作に至らなかったボツ企画や、 とりあえず作ったけどすぐに飽きて公表に至らないような小粒なやつもあったりします。\n\nしかしさすがに6年もやってるとやりたいことは大体できるようになってきた感もあるので、 ちゃんと自分が本当にいいと思えるものを作って、きちんと運用していきたいなと思う次第です。\n\nまぁそれがむずかしいんですけどね。。\n\nとりあえず2017年はトーナメントと年表でがんばりたいと思います。 おしまい。","date":1483050991000,"tag":["ポエム","個人開発論","つくったもの"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"1QWGxdPuxTuaZ9GweeMnaq","type":"Entry","createdAt":"2020-05-27T09:07:01.680Z","updatedAt":"2020-06-13T04:01:42.792Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"Riot.js x Firebaseで作る、超お手軽なパスワード不要のログインシステム「Magic Login」","slug":"2016/12/28/Riot_x_Firebaseで作る、超お手軽なパスワード不要のログイン","excerpt":"(2018年8月追記)  \n現在この機能はfirebase公式で提供されています。  \nこのブログの実装方法もまだ使えますが、簡単なのでぜひ公式のをお使いください。  \n[JavaScript でメールリンクを使用して Firebase 認証を行う  |  Firebase](https://firebase.google.com/docs/auth/web/email-link-auth?hl=ja)  \n(追記終わり)\n\n* * *\n\nWebサービスで本当にパスワードっているの？？という意識高いスタンスから、  \nむかしQiitaにRailsでパスワードなしログインの実装について記事を書きました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Ftomomichi%2Fitems%2F832dbd6c1a0a012519fd\" title=\"【Rails × sorcery】Slackみたいなパスワードなしのメールだけログイン機能を実装してみる - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://qiita.com/tomomichi/items/832dbd6c1a0a012519fd\">qiita.com</a></cite>\n\n完全に使うあてもなく趣味で作った機能だったけど、 本体のSorceryにプルリク送ったらかなり歓迎されて、 あとはテストさえ書けば取り込んでもらえそうな状態です。  \n（じゃあ書けよっていう。。）\n\n[Add Magic Login submodule by athix · Pull Request #8 · Sorcery/sorcery · GitHub](https://github.com/Sorcery/sorcery/pull/8)\n\nしかし最近はFirebaseがマイブームなので、Firebase版のパスワードなしログインシステム「Magic Login」を実装してみました。\n\nFirebaseには匿名認証の仕組みもあるので、ユーザー登録なしでも使えて、本登録するときは「MagicLogin」という組み合わせにすると、かなりいい感じになりましたよと。","content":"(2018年8月追記)  \n現在この機能はfirebase公式で提供されています。  \nこのブログの実装方法もまだ使えますが、簡単なのでぜひ公式のをお使いください。  \n[JavaScript でメールリンクを使用して Firebase 認証を行う  |  Firebase](https://firebase.google.com/docs/auth/web/email-link-auth?hl=ja)  \n(追記終わり)\n\n* * *\n\nWebサービスで本当にパスワードっているの？？という意識高いスタンスから、  \nむかしQiitaにRailsでパスワードなしログインの実装について記事を書きました。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Ftomomichi%2Fitems%2F832dbd6c1a0a012519fd\" title=\"【Rails × sorcery】Slackみたいなパスワードなしのメールだけログイン機能を実装してみる - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://qiita.com/tomomichi/items/832dbd6c1a0a012519fd\">qiita.com</a></cite>\n\n完全に使うあてもなく趣味で作った機能だったけど、 本体のSorceryにプルリク送ったらかなり歓迎されて、 あとはテストさえ書けば取り込んでもらえそうな状態です。  \n（じゃあ書けよっていう。。）\n\n[Add Magic Login submodule by athix · Pull Request #8 · Sorcery/sorcery · GitHub](https://github.com/Sorcery/sorcery/pull/8)\n\nしかし最近はFirebaseがマイブームなので、Firebase版のパスワードなしログインシステム「Magic Login」を実装してみました。\n\nFirebaseには匿名認証の仕組みもあるので、ユーザー登録なしでも使えて、本登録するときは「MagicLogin」という組み合わせにすると、かなりいい感じになりましたよと。環境\n--\n\n*   Firebase: 3.5.0\n*   Riot.js: 3.0.0\n*   SemanticUI: 2.2.4\n\nFirebase x Riot.jsのセットアップ\n-------------------------\n\nこの2つを使ったシステムのセットアップについては、  \nむかしQiitaに記事書きましたのでこちらを参考にしてください。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Ftomomichi%2Fitems%2F43da4d35007e69d0f484\" title=\"【Riot.js v3対応】Riot.js x Firebase で超お手軽にWebアプリを作ってみる - Qiita\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"http://qiita.com/tomomichi/items/43da4d35007e69d0f484\">qiita.com</a></cite>\n\n以下この記事の内容をベースに追加修正していきます。\n\n実装方針\n----\n\n*   サイトに訪問したら自動で匿名ユーザーとしてログインさせる\n*   メアドを入力したら、そのアドレスにトークン付きのワンタイムログインリンクを送る\n*   リンクを踏んで来たらログインさせる\n*   匿名ユーザーで作成してたデータを本ユーザーアカウントに紐づける（今回は省略）\n\nこんな感じ。\n\n今回はユーザーが新規登録かログインかを意識せずに使えるように設計してみました。\n\nメアド入れたときに、既登録ならそのままログインリンクを送り、未登録なら新規登録した上でログインリンクを送る、という感じにしています。\n\n新規登録とログインの間違えってけっこう多いし、そんなんシステムで判断してくれよ、って個人的には思うのですよね。。\n\nログイン画面\n------\n\n### 完成イメージ\n\nこんな感じの見た目にしていきます。\n\n![f:id:o_tomomichi:20161228105538p:plain](https://storage.googleapis.com/blog-notsobad/images/20161228105538.png \"f:id:o_tomomichi:20161228105538p:plain\")\n\nSlackのメールだけログイン画面にあからさまに影響を受けた、メールと魔法の杖のアイコンがすてきです。\n\nなんとこれ、画像一切つかわずやってるってなかなかすごくないですか。  \nSemanticUIのアイコン合成機能です。Semanticすごい！\n\n### 実装\n\nauth.tagをこんな感じで実装。\n\n<auth>\n  <div class=\"ui padded basic segment\">\n    <br><br>\n    <div class=\"ui three column center aligned stackable grid\">\n      <div class=\"ui column\">\n        <div class=\"ui center aligned basic segment\">\n            <i class=\"icons\">\n              <i class=\"purple inverted mail circular huge icon\"></i>\n              <i class=\"horizontally flipped wizard huge icon\"></i>\n            </i>\n            <h1 class=\"ui header\">\n              Magic Login\n              <div class=\"sub header\">\n                Get a magic linked email for super easy sign-in;)\n              </div>\n            </h1>\n          <div class=\"ui action fluid input\">\n            <input type=\"text\" ref=\"email\" placeholder=\"Type your email here.\">\n            <button class=\"ui pink right labeled icon button\" onclick={ magicAuth }>\n              <i class=\"send icon\"></i>\n              Send\n            </button>\n          </div>\n          <div if={ message } class=\"ui visible left aligned basic segment { message.type } message\">{ message.text }</div>\n        </div>\n      </div>\n    </div>\n    <br><br>\n  </div>\n\n\n  <script>\n    var that = this\n\n    firebase.auth().onAuthStateChanged(function(user) {\n      that.user = user\n    })\n\n    magicAuth() {\n      that.errorMessage = ''\n      var newPassword = Math.random().toString(36).slice(-12)\n\n      firebase.auth().createUserWithEmailAndPassword(that.refs.email.value, newPassword).then(function(){\n        //新規ユーザーの場合\n        firebase.auth().sendPasswordResetEmail(that.refs.email.value)\n        firebase.auth().signOut()\n        that.message = {\n          type: 'success',\n          text: 'ログイン用のメールを送信しました。メール内のリンクをクリックしてログインしてください。'\n        }\n      }).catch(function(error) {\n        //アドレスが既に登録済みの場合\n        if(error.code == 'auth/email-already-in-use') {\n          firebase.auth().sendPasswordResetEmail(that.refs.email.value)\n          that.message = {\n            type: 'success',\n            text: 'ログイン用のメールを送信しました。メール内のリンクをクリックしてログインしてください。'\n          }\n        //validationエラーなど\n        }else {\n          that.message = {\n            type: 'error',\n            text: error.message\n          }\n        }\n      }).then(function(){\n        that.update()\n      })\n    }\n  </script>\n</auth>\n\nキモは`firebase.auth().sendPasswordResetEmail(that.refs.email.value)`の部分で、要するにパスワードリセットメールを送ってるのですね。\n\nこれを踏んだあとの処理を魔改造することで、マジックログインを超簡単に実装しています。  \n次はそっちを見てみましょう。\n\n### リンク踏んだあとの処理\n\nriot.jsのroutingで、ログインメールのリンク踏んだときの処理を受け付けています。\n\n    route('/auth..', function(){\n      var q = route.query()\n      if(q.mode == 'resetPassword') {\n        firebase.auth().verifyPasswordResetCode(q.oobCode).then(function(email) {\n          var newPassword = Math.random().toString(36).slice(-12)\n          firebase.auth().confirmPasswordReset(q.oobCode, newPassword).then(function(){\n            firebase.auth().signInWithEmailAndPassword(email, newPassword)\n            alert('ログインしました')\n          })\n        }).catch(function(error){\n          alert('ログインに失敗しました..')\n        })\n      }\n    })\n\n`auth?mode=resetPassword&oobCode=xxxxxx`という感じのURLを踏んでくるイメージです。  \n（パラメータはFirebaseが自動付与）\n\nやってることは、\n\n*   `verifyPasswordResetCode(q.oobCode)`でトークンの検証\n*   正しいトークンならランダムに生成した文字列を新パスワードに設定\n*   新パスワードでログイン\n\nというだけです。\n\nキモは新パスワードをユーザーが意識することはないし、システム側でも管理しないというところ。超セキュア！\n\n次ログインするときはまたリセットするだけですからね。\n\n### Firebaseの設定\n\nFirebase側では、ログインメール（＝パスワードリセットメール）のリンクURLを設定しておきます。\n\nConsoleで、\n\n> Authentication > メールテンプレート > パスワードの再設定\n\nから設定を編集し、「アクションURLをカスタマイズ」というメニューで好きなURLを設定しておきます。\n\n> `https://hogehoge.com/auth`\n\nこんな感じで設定しておけば、パラメータ部分はFirebaseが自動で付与してくれます。\n\nまとめ\n---\n\nというわけで、Firebaseの標準機能に乗っかることで超お手軽にMagicLoginが実装できました。\n\nこの記事では触れなかったけど、アクセス時に全員匿名ユーザーとして裏でログインさせておいて、 データを永続化したいときはこの仕組みで簡単ログイン、という組み合わせにするとかなりいい感じです。\n\nこのサービスで実践投入してますので、よければどんな感じか見てみてください。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fthe-timeline.jp%2F\" title=\"簡単・便利な無料の年表作成サービス | THE TIMELINE(ザ・タイムライン)\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://the-timeline.jp/\">the-timeline.jp</a></cite>\n\n年表たのしいでよ。","date":1482891904000,"tag":["つくったもの","技術系"]}},{"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"2widkdbc59vz"}},"id":"2B3bq6ywrih8IbwlKOuM05","type":"Entry","createdAt":"2020-05-27T09:07:08.809Z","updatedAt":"2020-06-13T04:02:07.299Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":6,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"新しいタブを開くたびに「二十四節気七十二候」の美しい言葉で季節を感じられるシンプルなChrome拡張機能「Tab Sekki」をつくりました。","slug":"2016/12/12/tabsekki","excerpt":"![f:id:o_tomomichi:20161212201514p:plain](https://storage.googleapis.com/blog-notsobad/images/20161212201514.png \"f:id:o_tomomichi:20161212201514p:plain\")\n\n### 毎日11回も新しいタブ見てるって知ってた？\n\nFirefoxの調査によると、平均的なインターネットユーザーは[1日11回ブラウザの新しいタブを開いている](http://news.mynavi.jp/articles/2012/06/06/ff13/)そうです。\n\n普段たいして気にすることもない新しいタブですが、実は毎日何回も目にしているので、どうせなら何か有意義に使いたいと思いますよね。","content":"![f:id:o_tomomichi:20161212201514p:plain](https://storage.googleapis.com/blog-notsobad/images/20161212201514.png \"f:id:o_tomomichi:20161212201514p:plain\")\n\n### 毎日11回も新しいタブ見てるって知ってた？\n\nFirefoxの調査によると、平均的なインターネットユーザーは[1日11回ブラウザの新しいタブを開いている](http://news.mynavi.jp/articles/2012/06/06/ff13/)そうです。\n\n普段たいして気にすることもない新しいタブですが、実は毎日何回も目にしているので、どうせなら何か有意義に使いたいと思いますよね。### 新しいタブはChrome拡張でカスタマイズできるんですよ\n\nGoogleChromeでは、拡張機能を入れることでこの新しいタブに表示される内容をカスタマイズすることができます。\n\n[「新しいタブ」を有効活用できるChromeの拡張機能5選 | 東京上野のWeb制作会社LIG](https://liginc.co.jp/web/tool/browser/66547)\n\nいろんな拡張がありますが、既存の拡張機能で多いのが、便利なリンクやツールを置いたものですね。  \n天気やカレンダー・ToDoリストなどが鉄板系。\n\n### でも、ほしいのはもっとシンプルな…\n\nなんだけど、そんなにがっつり新しいタブを見たいわけでもなくて、もうちょっとこうシンプルで主張しなくて、それでいて何かちょっとだけ毎日がいい感じになるような、そんな新しいタブが、わたしはほしい。\n\nと思ったので、作りました。 その名も「TabSekki」。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Ftab-sekki-%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AF%80%E6%B0%97%E4%B8%83%E5%8D%81%E4%BA%8C%E5%80%99%2Fhpiplbccmdafmjoompeplcakgghggcfh\" title=\"Tab Sekki - 二十四節気七十二候\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://chrome.google.com/webstore/detail/tab-sekki-二十四節気七十二候/hpiplbccmdafmjoompeplcakgghggcfh\">chrome.google.com</a></cite>\n\n新しいタブを開くと、いまの時期が該当する「二十四節気七十二候」の暦を表示してくれるという、ただそれだけの拡張機能です。\n\n新しいタブを開いたときの画面が、こんな感じ↓になります。\n\n![f:id:o_tomomichi:20161212192746p:plain](https://storage.googleapis.com/blog-notsobad/images/20161212192746.png \"f:id:o_tomomichi:20161212192746p:plain\")\n\nあとせっかくなので背景にはその季節をイメージした日本の伝統色を配し、うっすら和文様をデザインしております。\n\nランダムで違う「候」に切り替える機能もあるので、ヒマなときはポチポチしてみてください。\n\n### 知らなかったでは済まされない「二十四節気七十二候」とは\n\n[二十四節気と七十二候｜暦生活](http://www.543life.com/season.html)\n\n二十四節気は、「夏至」「秋分」など、今でも耳にする機会が多いですね。 もともとは中国で一年を分割してその季節を表す名称をつけたものです。\n\n七十二候はその「節気」をさらに3つずつに分割したもので、例えばこの記事を書いている11月30日だと「朔風払葉（きたかぜこのはをはらう）」となります。 かっこいいですね。\n\n七十二候には、その時期を代表する気象や動植物の動き、人の営みなど、昔の人が季節をどう感じていたかを伝える美しい言葉が多いです。\n\n### さぁ、新しいタブを開くたびに季節を感じる素敵な生活へ\n\n毎日パソコンに向き合って仕事していると、なかなか季節を感じることもない今日この頃。\n\nせめて新しいタブを開いたときくらい、美しい言葉と色で、ふっと窓の外を見るきっかけにでもなれば幸いです。\n\nインストールはChromeウェブストアからどうぞ。\n\n<iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fchrome.google.com%2Fwebstore%2Fdetail%2Ftab-sekki-%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AF%80%E6%B0%97%E4%B8%83%E5%8D%81%E4%BA%8C%E5%80%99%2Fhpiplbccmdafmjoompeplcakgghggcfh\" title=\"Tab Sekki - 二十四節気七十二候\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://chrome.google.com/webstore/detail/tab-sekki-二十四節気七十二候/hpiplbccmdafmjoompeplcakgghggcfh\">chrome.google.com</a></cite>\n\nランダム切替を無制限にできる有料版も用意しておきましたので、万が一ランダム表示したくてたまらない方がいたら、応援のつもりでポチッとしてくれるとうれしいです。","date":1478082530000,"image":"https://storage.googleapis.com/blog-notsobad/images/20161212201514.png","tag":["つくったもの","技術系"]}}]},"tag":"つくったもの","page":1,"hasNextPage":false},"__N_SSG":true}